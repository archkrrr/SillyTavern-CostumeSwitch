<!-- SillyTavern-CostumeSwitch settings.html -->
<div class="ext-card">
  <h3>Costume Switch</h3>

  <div style="display:flex;gap:12px;align-items:center;margin-bottom:8px">
    <label><input type="checkbox" id="cs-enable"> Enabled</label>
    <label style="margin-left:8px">Debug: <input type="checkbox" id="cs-debug"></label>
  </div>

  <div style="margin-bottom:8px">
    <label>Character name patterns (one per line â€” plain text or /regex/flags):</label>
    <textarea id="cs-patterns" rows="4" style="width:100%;"></textarea>
    <div id="cs-error" style="color:#a00;display:none;margin-top:4px"></div>
  </div>

  <div style="display:flex;gap:8px;margin-bottom:8px">
    <div style="flex:1">
      <label>Default Costume (folder or blank to fallback to current character):</label>
      <input id="cs-default" style="width:100%" />
    </div>
    <div style="width:140px">
      <label>Reset timeout (ms)</label>
      <input id="cs-timeout" type="number" style="width:100%" />
    </div>
  </div>

  <div style="display:flex;gap:8px;margin-bottom:8px">
    <div style="width:170px">
      <label>Global cooldown (ms)</label>
      <input id="cs-global-cooldown" type="number" style="width:100%" />
    </div>
    <div style="width:170px">
      <label>Per-trigger cooldown (ms)</label>
      <input id="cs-per-cooldown" type="number" style="width:100%" />
    </div>
    <div style="width:170px">
      <label>Failed-trigger cooldown (ms)</label>
      <input id="cs-failed-cooldown" type="number" style="width:100%" />
    </div>
  </div>

  <div style="display:flex;gap:8px;margin-bottom:8px">
    <div style="width:170px">
      <label>Max buffer chars</label>
      <input id="cs-max-buffer" type="number" style="width:100%" />
    </div>
    <div style="width:170px">
      <label>Repeat suppress (ms)</label>
      <input id="cs-repeat-suppress" type="number" style="width:100%" />
    </div>
    <div style="flex:1;display:flex;align-items:center;">
      <label style="margin-left:8px"><input id="cs-narration" type="checkbox"> Enable narration switching</label>
    </div>
  </div>

  <hr />

  <div>
    <h4>Mapping table (optional)</h4>
    <div style="font-size:90%;color:#666;margin-bottom:6px">
      Map a detected character name to a specific quick-reply / costume folder string.
      Example: <code>Shido</code> -> <code>Shido/BestOutfit</code>
    </div>

    <table style="width:100%;border-collapse:collapse">
      <thead>
        <tr>
          <th style="text-align:left">Character name</th>
          <th style="text-align:left">Costume folder / quick-reply</th>
          <th></th>
        </tr>
      </thead>
      <tbody id="cs-mappings-tbody"></tbody>
    </table>

    <div style="margin-top:6px">
      <button id="cs-mapping-add">Add mapping</button>
    </div>
  </div>

  <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
    <button id="cs-save">Save</button>
    <button id="cs-reset">Manual Reset</button>
    <div id="cs-status" style="margin-left:12px;color:#888"></div>
  </div>
</div>
